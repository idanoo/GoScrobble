{"ast":null,"code":"import axios from 'axios';\nimport jwt from 'jwt-decode';\nimport { toast } from 'react-toastify';\n\nfunction getHeaders() {\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.jwt) {\n    var unixtime = Math.round(new Date().getTime() / 1000);\n\n    if (user.exp < unixtime) {\n      // Trigger refresh\n      localStorage.removeItem('user');\n      window.location.reload(); // toast.warning(\"Session expired. Please log in again\")\n      // window.location.reload();\n\n      return {};\n    }\n\n    return {\n      Authorization: 'Bearer ' + user.jwt\n    };\n  } else {\n    return {};\n  }\n}\n\nfunction getUserUuid() {\n  // TODO: move this to use Context values instead.\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.uuid) {\n    return user.uuid;\n  } else {\n    return '';\n  }\n}\n\nfunction handleErrorResp(error) {\n  if (error.response) {\n    if (error.response.status === 401) {\n      toast.error('Unauthorized');\n    } else if (error.response.status === 429) {\n      toast.error('Rate limited. Please try again shortly');\n    } else {\n      toast.error('An unknown error has occurred');\n    }\n  } else {\n    toast.error('Failed to connect to API');\n  }\n\n  return {};\n}\n\nexport const PostLogin = formValues => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/login\", formValues).then(response => {\n    if (response.data.token) {\n      let expandedUser = jwt(response.data.token);\n      let user = {\n        jwt: response.data.token,\n        uuid: expandedUser.sub,\n        exp: expandedUser.exp,\n        username: expandedUser.username,\n        admin: expandedUser.admin,\n        mod: expandedUser.mod,\n        refresh_token: expandedUser.refresh_token,\n        refresh_exp: expandedUser.refresh_exp\n      };\n      toast.success('Successfully logged in.');\n      return user;\n    } else {\n      toast.error(response.data.error ? response.data.error : 'An Unknown Error has occurred');\n      return null;\n    }\n  }).catch(error => {\n    if (error.response === 401) {\n      toast.error('Unauthorized');\n    } else if (error.response === 429) {\n      toast.error('Rate limited. Please try again shortly');\n    } else {\n      toast.error('Failed to connect');\n    }\n\n    return Promise.resolve();\n  });\n};\n_c = PostLogin;\nexport const PostRefreshToken = refreshToken => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/refresh\", {\n    token: refreshToken\n  }).then(response => {\n    if (response.data.token) {\n      let expandedUser = jwt(response.data.token);\n      let user = {\n        jwt: response.data.token,\n        uuid: expandedUser.sub,\n        exp: expandedUser.exp,\n        username: expandedUser.username,\n        admin: expandedUser.admin,\n        mod: expandedUser.mod,\n        refresh_token: expandedUser.refresh_token,\n        refresh_exp: expandedUser.refresh_exp\n      };\n      return user;\n    } else {\n      toast.error(response.data.error ? response.data.error : 'An Unknown Error has occurred');\n      return null;\n    }\n  }).catch(error => {\n    if (error.response === 401) {\n      toast.error('Unauthorized');\n    } else if (error.response === 429) {\n      toast.error('Rate limited. Please try again shortly');\n    } else {\n      toast.error('Failed to connect');\n    }\n\n    return Promise.resolve();\n  });\n};\n_c2 = PostRefreshToken;\nexport const PostRegister = formValues => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/register\", formValues).then(response => {\n    if (response.data.message) {\n      toast.success(response.data.message);\n      return Promise.resolve();\n    } else {\n      toast.error(response.data.error ? response.data.error : 'An Unknown Error has occurred');\n      return Promise.resolve();\n    }\n  }).catch(error => {\n    handleErrorResp(error);\n    return Promise.resolve();\n  });\n};\n_c3 = PostRegister;\nexport const PostResetPassword = formValues => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/resetpassword\", formValues).then(response => {\n    if (response.data.message) {\n      toast.success(response.data.message);\n      return Promise.resolve();\n    } else {\n      toast.error(response.data.error ? response.data.error : 'An Unknown Error has occurred');\n      return Promise.reject();\n    }\n  }).catch(error => {\n    handleErrorResp(error);\n    return Promise.resolve();\n  });\n};\n_c4 = PostResetPassword;\nexport const sendPasswordReset = values => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/sendreset\", values).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const uploadImage = (values, type, uuid, history) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/\" + type + \"s/\" + uuid + \"/upload\", values, {\n    headers: getHeaders()\n  }).then(response => {\n    if (response.data.message) {\n      toast.success(response.data.message); // Hacky (:\n\n      history.push(\"/\" + type + \"/\" + uuid);\n      window.location.reload();\n      return Promise.resolve();\n    } else {\n      toast.error(response.data.error ? response.data.error : 'An Unknown Error has occurred');\n      return Promise.reject();\n    }\n  }).catch(error => {\n    handleErrorResp(error);\n    return Promise.resolve();\n  });\n};\nexport const getStats = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/stats\").then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n}; // export const getRecentScrobblesForUser = (uuid) => {\n//   return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user/\" + uuid + \"/scrobbles\", { headers: getHeaders() })\n//     .then((data) => {\n//       return data.data;\n//     }).catch((error) => {\n//       return handleErrorResp(error)\n//     });\n// };\n\nexport const getRecentScrobbles = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/recent\").then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getConfigs = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/config\", {\n    headers: getHeaders()\n  }).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const postConfigs = (values, toggle) => {\n  if (toggle) {\n    values.REGISTRATION_ENABLED = \"1\";\n  } else {\n    values.REGISTRATION_ENABLED = \"0\";\n  }\n\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/config\", values, {\n    headers: getHeaders()\n  }).then(data => {\n    if (data.data && data.data.message) {\n      toast.success(data.data.message);\n    } else if (data.data && data.data.error) {\n      toast.error(data.data.error);\n    }\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getProfile = userName => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/profile/\" + userName, {\n    headers: getHeaders()\n  }).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getUser = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user\", {\n    headers: getHeaders()\n  }).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const patchUser = values => {\n  return axios.patch(process.env.REACT_APP_API_URL + \"/api/v1/user\", values, {\n    headers: getHeaders()\n  }).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const validateResetPassword = tokenStr => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user/\", {\n    headers: getHeaders()\n  }).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getSpotifyClientId = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user/spotify\", {\n    headers: getHeaders()\n  }).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const spotifyConnectionRequest = () => {\n  return getSpotifyClientId().then(resp => {\n    var scopes = 'user-read-recently-played user-read-currently-playing'; // Local, lets forward it to API\n\n    let redirectUri = window.location.origin.toString() + \"/api/v1/link/spotify\"; // Stupid dev\n\n    if (window.location.origin.toString() === \"http://localhost:3000\") {\n      redirectUri = \"http://localhost:42069/api/v1/link/spotify\";\n    }\n\n    window.location = 'https://accounts.spotify.com/authorize' + '?response_type=code' + '&client_id=' + resp.token + '&scope=' + encodeURIComponent(scopes) + '&redirect_uri=' + encodeURIComponent(redirectUri) + '&state=' + getUserUuid();\n  });\n};\nexport const spotifyDisonnectionRequest = () => {\n  return axios.delete(process.env.REACT_APP_API_URL + \"/api/v1/user/spotify\", {\n    headers: getHeaders()\n  }).then(data => {\n    toast.success(data.data.message);\n    return true;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const navidromeConnectionRequest = values => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/user/navidrome\", values, {\n    headers: getHeaders()\n  }).then(data => {\n    toast.success(data.data.message);\n    return true;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const navidromeDisonnectionRequest = () => {\n  return axios.delete(process.env.REACT_APP_API_URL + \"/api/v1/user/navidrome\", {\n    headers: getHeaders()\n  }).then(data => {\n    toast.success(data.data.message);\n    return true;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getServerInfo = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/serverinfo\").then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getArtist = uuid => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/artists/\" + uuid).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getAlbum = uuid => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/albums/\" + uuid).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getTrack = uuid => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/tracks/\" + uuid).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getTopTracks = (uuid, days) => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/tracks/top/\" + uuid;\n\n  if (days) {\n    url = url + \"/\" + days;\n  }\n\n  return axios.get(url).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getArtistTracks = uuid => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/tracks/artist/\" + uuid;\n  return axios.get(url).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getAlbumTracks = uuid => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/tracks/album/\" + uuid;\n  return axios.get(url).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getTopArtists = (uuid, days) => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/artists/top/\" + uuid;\n\n  if (days) {\n    url = url + \"/\" + days;\n  }\n\n  return axios.get(url).then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getTopUsersForTrack = uuid => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/tracks/\" + uuid + \"/top\").then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getTopUsersForAlbum = uuid => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/albums/\" + uuid + \"/top\").then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\nexport const getTopUsersForArtist = uuid => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/artists/\" + uuid + \"/top\").then(data => {\n    return data.data;\n  }).catch(error => {\n    return handleErrorResp(error);\n  });\n};\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"PostLogin\");\n$RefreshReg$(_c2, \"PostRefreshToken\");\n$RefreshReg$(_c3, \"PostRegister\");\n$RefreshReg$(_c4, \"PostResetPassword\");","map":{"version":3,"sources":["/app/src/Api/index.js"],"names":["axios","jwt","toast","getHeaders","user","JSON","parse","localStorage","getItem","unixtime","Math","round","Date","getTime","exp","removeItem","window","location","reload","Authorization","getUserUuid","uuid","handleErrorResp","error","response","status","PostLogin","formValues","post","process","env","REACT_APP_API_URL","then","data","token","expandedUser","sub","username","admin","mod","refresh_token","refresh_exp","success","catch","Promise","resolve","PostRefreshToken","refreshToken","PostRegister","message","PostResetPassword","reject","sendPasswordReset","values","uploadImage","type","history","headers","push","getStats","get","getRecentScrobbles","getConfigs","postConfigs","toggle","REGISTRATION_ENABLED","getProfile","userName","getUser","patchUser","patch","validateResetPassword","tokenStr","getSpotifyClientId","spotifyConnectionRequest","resp","scopes","redirectUri","origin","toString","encodeURIComponent","spotifyDisonnectionRequest","delete","navidromeConnectionRequest","navidromeDisonnectionRequest","getServerInfo","getArtist","getAlbum","getTrack","getTopTracks","days","url","getArtistTracks","getAlbumTracks","getTopArtists","getTopUsersForTrack","getTopUsersForAlbum","getTopUsersForArtist"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport jwt from 'jwt-decode'\nimport { toast } from 'react-toastify';\n\nfunction getHeaders() {\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.jwt) {\n    var unixtime = Math.round((new Date()).getTime() / 1000);\n    if (user.exp < unixtime) {\n      // Trigger refresh\n      localStorage.removeItem('user');\n      window.location.reload();\n      // toast.warning(\"Session expired. Please log in again\")\n      // window.location.reload();\n      return {};\n    }\n\n    return { Authorization: 'Bearer ' + user.jwt };\n  } else {\n    return {};\n  }\n}\n\nfunction getUserUuid() {\n  // TODO: move this to use Context values instead.\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.uuid) {\n    return user.uuid\n  } else {\n    return '';\n  }\n}\n\nfunction handleErrorResp(error) {\n  if (error.response) {\n    if (error.response.status === 401)  {\n      toast.error('Unauthorized')\n    } else if (error.response.status === 429) {\n      toast.error('Rate limited. Please try again shortly')\n    } else {\n      toast.error('An unknown error has occurred');\n    }\n  } else {\n    toast.error('Failed to connect to API');\n  }\n  return {};\n}\n\nexport const PostLogin = (formValues) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/login\", formValues)\n    .then((response) => {\n      if (response.data.token) {\n        let expandedUser = jwt(response.data.token)\n        let user = {\n          jwt: response.data.token,\n          uuid: expandedUser.sub,\n          exp: expandedUser.exp,\n          username: expandedUser.username,\n          admin: expandedUser.admin,\n          mod: expandedUser.mod,\n          refresh_token: expandedUser.refresh_token,\n          refresh_exp: expandedUser.refresh_exp,\n        }\n\n        toast.success('Successfully logged in.');\n        return user;\n      } else {\n        toast.error(response.data.error ? response.data.error: 'An Unknown Error has occurred');\n        return null\n      }\n    }).catch((error) => {\n      if (error.response === 401)  {\n        toast.error('Unauthorized')\n      } else if (error.response === 429) {\n        toast.error('Rate limited. Please try again shortly')\n      } else {\n        toast.error('Failed to connect');\n      }\n      return Promise.resolve();\n    });\n};\n\nexport const PostRefreshToken = (refreshToken) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/refresh\", {token: refreshToken})\n    .then((response) => {\n      if (response.data.token) {\n        let expandedUser = jwt(response.data.token)\n        let user = {\n          jwt: response.data.token,\n          uuid: expandedUser.sub,\n          exp: expandedUser.exp,\n          username: expandedUser.username,\n          admin: expandedUser.admin,\n          mod: expandedUser.mod,\n          refresh_token: expandedUser.refresh_token,\n          refresh_exp: expandedUser.refresh_exp,\n        }\n\n        return user;\n      } else {\n        toast.error(response.data.error ? response.data.error: 'An Unknown Error has occurred');\n        return null\n      }\n    }).catch((error) => {\n      if (error.response === 401)  {\n        toast.error('Unauthorized')\n      } else if (error.response === 429) {\n        toast.error('Rate limited. Please try again shortly')\n      } else {\n        toast.error('Failed to connect');\n      }\n      return Promise.resolve();\n    });\n};\n\n\nexport const PostRegister = (formValues) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/register\", formValues)\n    .then((response) => {\n      if (response.data.message) {\n        toast.success(response.data.message);\n\n        return Promise.resolve();\n      } else {\n        toast.error(response.data.error ? response.data.error: 'An Unknown Error has occurred');\n\n        return Promise.resolve();\n      }\n    }).catch((error) => {\n      handleErrorResp(error)\n      return Promise.resolve();\n  });\n};\n\nexport const PostResetPassword = (formValues) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/resetpassword\", formValues)\n    .then((response) => {\n      if (response.data.message) {\n        toast.success(response.data.message);\n\n        return Promise.resolve();\n      } else {\n        toast.error(response.data.error ? response.data.error: 'An Unknown Error has occurred');\n\n        return Promise.reject();\n      }\n    }).catch((error) => {\n      handleErrorResp(error)\n      return Promise.resolve();\n    });\n};\n\nexport const sendPasswordReset = (values) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/sendreset\", values).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n};\n\nexport const uploadImage = (values, type, uuid, history) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/\"+type+\"s/\"+uuid+\"/upload\", values, { headers: getHeaders() })\n    .then((response) => {\n      if (response.data.message) {\n        toast.success(response.data.message);\n        \n        // Hacky (:\n        history.push(\"/\"+type+\"/\"+uuid);\n        window.location.reload();\n\n\n        return Promise.resolve();\n      } else {\n        toast.error(response.data.error ? response.data.error: 'An Unknown Error has occurred');\n\n        return Promise.reject();\n      }\n    }).catch((error) => {\n      handleErrorResp(error)\n      return Promise.resolve();\n    });\n};\n\nexport const getStats = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/stats\").then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n};\n\n// export const getRecentScrobblesForUser = (uuid) => {\n//   return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user/\" + uuid + \"/scrobbles\", { headers: getHeaders() })\n//     .then((data) => {\n//       return data.data;\n//     }).catch((error) => {\n//       return handleErrorResp(error)\n//     });\n// };\n\nexport const getRecentScrobbles = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/recent\")\n    .then((data) => {\n      return data.data;\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const getConfigs = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/config\", { headers: getHeaders() })\n    .then((data) => {\n      return data.data;\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const postConfigs = (values, toggle) => {\n  if (toggle) {\n    values.REGISTRATION_ENABLED = \"1\"\n  } else {\n    values.REGISTRATION_ENABLED = \"0\"\n  }\n\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/config\", values, { headers: getHeaders() })\n    .then((data) => {\n      if (data.data && data.data.message) {\n        toast.success(data.data.message);\n      } else if (data.data && data.data.error) {\n        toast.error(data.data.error);\n      }\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const getProfile = (userName) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/profile/\" + userName, { headers: getHeaders() })\n    .then((data) => {\n      return data.data;\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const getUser = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user\", { headers: getHeaders() })\n    .then((data) => {\n      return data.data;\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const patchUser = (values) => {\n  return axios.patch(process.env.REACT_APP_API_URL + \"/api/v1/user\", values, { headers: getHeaders() })\n    .then((data) => {\n      return data.data;\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const validateResetPassword = (tokenStr) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user/\", { headers: getHeaders() })\n    .then((data) => {\n      return data.data;\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n};\n\nexport const getSpotifyClientId = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/user/spotify\", { headers: getHeaders() })\n    .then((data) => {\n      return data.data\n    }).catch((error) => {\n      return handleErrorResp(error)\n    });\n}\n\nexport const spotifyConnectionRequest = () => {\n  return getSpotifyClientId().then((resp) => {\n    var scopes = 'user-read-recently-played user-read-currently-playing';\n\n    // Local, lets forward it to API\n    let redirectUri = window.location.origin.toString()+ \"/api/v1/link/spotify\";\n\n    // Stupid dev\n    if (window.location.origin.toString() === \"http://localhost:3000\") {\n      redirectUri = \"http://localhost:42069/api/v1/link/spotify\"\n    }\n\n    window.location = 'https://accounts.spotify.com/authorize' +\n      '?response_type=code' +\n      '&client_id=' + resp.token +\n      '&scope=' + encodeURIComponent(scopes) +\n      '&redirect_uri=' + encodeURIComponent(redirectUri) +\n      '&state=' + getUserUuid();\n  })\n};\n\nexport const spotifyDisonnectionRequest = () => {\n  return axios.delete(process.env.REACT_APP_API_URL + \"/api/v1/user/spotify\", { headers: getHeaders() })\n  .then((data) => {\n    toast.success(data.data.message);\n    return true\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const navidromeConnectionRequest = (values) => {\n  return axios.post(process.env.REACT_APP_API_URL + \"/api/v1/user/navidrome\", values, { headers: getHeaders() })\n  .then((data) => {\n    toast.success(data.data.message);\n    return true\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n};\n\nexport const navidromeDisonnectionRequest = () => {\n  return axios.delete(process.env.REACT_APP_API_URL + \"/api/v1/user/navidrome\", { headers: getHeaders() })\n  .then((data) => {\n    toast.success(data.data.message);\n    return true\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getServerInfo = () => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/serverinfo\")\n  .then((data) => {\n    return data.data\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getArtist = (uuid) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/artists/\" + uuid).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n};\n\nexport const getAlbum = (uuid) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/albums/\" + uuid).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n};\n\nexport const getTrack = (uuid) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/tracks/\" + uuid).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n};\n\nexport const getTopTracks = (uuid, days) => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/tracks/top/\" + uuid\n  if (days) {\n    url = url + \"/\" + days\n  }\n\n  return axios.get(url).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getArtistTracks = (uuid) => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/tracks/artist/\" + uuid\n\n  return axios.get(url).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getAlbumTracks = (uuid) => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/tracks/album/\" + uuid\n\n  return axios.get(url).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getTopArtists = (uuid, days) => {\n  let url = process.env.REACT_APP_API_URL + \"/api/v1/artists/top/\" + uuid\n  if (days) {\n    url = url + \"/\" + days\n  }\n  return axios.get(url).then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getTopUsersForTrack = (uuid) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/tracks/\" + uuid + \"/top\").then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getTopUsersForAlbum = (uuid) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/albums/\" + uuid + \"/top\").then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}\n\nexport const getTopUsersForArtist = (uuid) => {\n  return axios.get(process.env.REACT_APP_API_URL + \"/api/v1/artists/\" + uuid + \"/top\").then(\n    (data) => {\n      return data.data;\n  }).catch((error) => {\n    return handleErrorResp(error)\n  });\n}"]},"metadata":{},"sourceType":"module"}